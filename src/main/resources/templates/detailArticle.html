<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>文章详细</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link href="https://cdn.bootcss.com/materialize/0.97.8/css/materialize.min.css" rel="stylesheet"/>
</head>

<body>

<!--导航栏-->
<div th:replace="common::head"></div>

<!--侧边导航-->
<ul id="slide-out" class="side-nav">
    <li>
        <div class="userView">
            <div class="background">
                <img src="images/office.jpg"/>
            </div>
            <a href="#!user"><img class="circle" src="images/yuna.jpg"/></a>
            <a href="#!name"><span class="white-text name">张三</span></a>
            <a href="#!email"><span class="white-text email">jdandturk@sina.com</span></a>
        </div>
    </li>
    <li>
        <a href="/articles"><i class="material-icons">cloud</i>文章列表</a>
    </li>
    <li>
        <a href="/postArticle">发布文章</a>
    </li>
    <li>
        <div class="divider"></div>
    </li>
    <li>
        <a class="subheader">个人中心</a>
    </li>
    <li id="logout">
        <a class="waves-effect">退出</a>
    </li>
</ul>

<div class="container">
    <div class="row">
        <!--文章标题-->
        <div class="center">
            <h3 th:text="${article?.title}">文章标题</h3>
        </div>
        <!--收藏-->
        <div class="right">
            <a href="javascript:void(0);" id="favorite" class="grey-text"><i class="material-icons">grade</i></a>
        </div>
        <br/>
        <!--文章内容-->
        <div style="min-height: 500px;height:auto !important;height:500px;">
            <div class="card-panel hoverable  teal lighten-5">
                <p class="flow-text" th:utext="${article?.contentHtml}">
                </p>
            </div>
            <!--编辑删除-->
            <div th:hidden="${status}" class="right-align">
                <a th:href="'/edit/'+${article?.articleId}" class="grey-text text-lighten-1">编辑文章</a>
                <a href="javascript:void(0);" class="deep-orange-text deep-orange-lighten-3 delLink">删除文章</a>
            </div>
        </div>
        <!--文章id-->
        <input id="articleId" type="hidden" th:value="${article?.articleId}" />

        <!--评论列表-->
        <h4>评论</h4>
        <ul class="collection" th:each="comment:${comments}">
            <li class="collection-item avatar">
                <i class="material-icons circle green">insert_chart</i>
                <p th:utext="${comment?.userName}"></p>
                <p th:utext="${comment?.content}"></p>
                <p th:utext="${comment?.createTime}"></p>
                <input id="commentId" type="hidden" th:value="${comment?.commentId}" />
                <a href="javascript:void(0);" class="secondary-content"><i th:class="${comment?.voteStates}==1?'material-icons red-text':'material-icons'">thumb_up</i></a>
            </li>
        </ul>

        <!--评论编辑区域-->
        <div id="editor" class="section">
        </div>
        <!--发布按钮-->
        <button class="btn waves-effect waves-light sendCom right">提交
            <i class="material-icons right">send</i>
        </button>
    </div>
</div>

<!--全局选项按钮-->
<div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large teal">
        <i class="material-icons">mode_edit</i>
    </a>
    <ul>
        <li><a class="btn-floating red" style="transform: scaleY(0.4) scaleX(0.4) translateY(40px) translateX(0px); opacity: 0;"><i class="material-icons">insert_chart</i></a></li>
        <li><a class="btn-floating yellow darken-1" style="transform: scaleY(0.4) scaleX(0.4) translateY(40px) translateX(0px); opacity: 0;"><i class="material-icons">format_quote</i></a></li>
        <li><a class="btn-floating green" style="transform: scaleY(0.4) scaleX(0.4) translateY(40px) translateX(0px); opacity: 0;"><i class="material-icons">publish</i></a></li>
        <li><a class="btn-floating blue" style="transform: scaleY(0.4) scaleX(0.4) translateY(40px) translateX(0px); opacity: 0;"><i class="material-icons">attach_file</i></a></li>
    </ul>
</div>

<!--页脚-->
<div th:replace="common::foot"></div>

<!--jQuery-->
<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/materialize/0.97.8/js/materialize.min.js"></script>

<!--富文本编辑器-->
<script src="https://cdn.bootcss.com/wangEditor/10.0.13/wangEditor.min.js"></script>

<!--通用js-->
<script type="text/javascript" src="/js/common.js"></script>
<script type="text/javascript" src="/js/editComment.js"></script>

<script>
    //初始化
    $(function () {
        $.get("/favorite/"+$("#articleId").val(), function(result){
            if(result['status']==200) {
                $("#favorite").children("i").attr("class", "material-icons red-text");
            }
        });
        editComment.init();
    });
</script>
</body>

</html>